<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мапа Omg</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map {
            height: 600px;
            width: 600px;
            margin: 0 auto;
        }
        #mapContainer {
            text-align: center;
        }
        #disclaimer {
            font-size: 10pt;
        }
    </style>
</head>
<body>
<h1 style="text-align: center;">Мапа Omg</h1>
<div id="mapContainer">
    <div id="map"></div>
    <button onclick="toggleMapLayer()">Змінити фон</button>
    <p id="disclaimer">Зроблено не Анастасійкою і не в 2024 році</p>
</div>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script>
    var mymap = L.map('map').setView([50.4501, 30.5234], 13);

    var defaultTileLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
    }).addTo(mymap);

    var customTileLayer = L.tileLayer('http://88.99.52.156/tmg/{z}/{x}/{y}', {
        maxZoom: 19,
    });

    var currentTileLayer = defaultTileLayer;

    function toggleMapLayer() {
        if (currentTileLayer === defaultTileLayer) {
            mymap.removeLayer(defaultTileLayer);
            mymap.addLayer(customTileLayer);
            currentTileLayer = customTileLayer;
        } else {
            mymap.removeLayer(customTileLayer);
            mymap.addLayer(defaultTileLayer);
            currentTileLayer = defaultTileLayer;
        }
    }

    var pointJson = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        30.511387152054056,
                        50.477168495545044
                    ],
                    "type": "Point"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        30.518160607038965,
                        50.4727033441975
                    ],
                    "type": "Point"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        30.50951367131148,
                        50.46995161131747
                    ],
                    "type": "Point"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        30.52155016724302,
                        50.46905931353734
                    ],
                    "type": "Point"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        30.51265958362609,
                        50.46474699465338
                    ],
                    "type": "Point"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        30.519199690931202,
                        50.463260191065615
                    ],
                    "type": "Point"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        30.517589553131558,
                        50.47754492783383
                    ],
                    "type": "Point"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        30.50844063757654,
                        50.461857602197284
                    ],
                    "type": "Point"
                }
            }
        ]
    };

    var lineJson = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        [
                            30.514642326601574,
                            50.48249647397034
                        ],
                        [
                            30.506935807322435,
                            50.47525714806429
                        ],
                        [
                            30.514088111698413,
                            50.475140650494154
                        ],
                        [
                            30.504723875737398,
                            50.467780918483044
                        ],
                        [
                            30.513714198379404,
                            50.46801819906301
                        ],
                        [
                            30.50321734361367,
                            50.46077610740909
                        ],
                        [
                            30.526742357431715,
                            50.46125022135922
                        ],
                        [
                            30.51774887277267,
                            50.467785220395854
                        ],
                        [
                            30.524911335902118,
                            50.468138450296465
                        ],
                        [
                            30.51757403348566,
                            50.475141544864044
                        ],
                        [
                            30.522896076776107,
                            50.47537669656947
                        ],
                        [
                            30.515009036271522,
                            50.482613074662936
                        ]
                    ],
                    "type": "LineString"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        [
                            [
                                30.511931221824568,
                                50.460821891013836
                            ],
                            [
                                30.511914345908565,
                                50.458460830737806
                            ],
                            [
                                30.519566598907574,
                                50.45847174925012
                            ],
                            [
                                30.519536649527282,
                                50.46110847386572
                            ],
                            [
                                30.511931221824568,
                                50.460821891013836
                            ]
                        ]
                    ],
                    "type": "Polygon"
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "coordinates": [
                        [
                            [
                                30.51337259768428,
                                50.482001410025475
                            ],
                            [
                                30.51699806355009,
                                50.48378863671445
                            ],
                            [
                                30.512788244188528,
                                50.48378620728033
                            ],
                            [
                                30.516178960918467,
                                50.482077135828206
                            ],
                            [
                                30.515008970011877,
                                50.48497623252865
                            ],
                            [
                                30.51337259768428,
                                50.482001410025475
                            ]
                        ]
                    ],
                    "type": "Polygon"
                }
            }
        ]
    };

    var pointIcon = L.icon({
        iconUrl: 'C:\\Users\\Ivan\\Downloads\\кітик.png',
        iconSize: [38, 38],
    });

    L.geoJSON(pointJson, {
        pointToLayer: function (feature, latlng) {
            var marker = L.marker(latlng, { icon: pointIcon });
            marker.bindPopup("Няв");
            return marker;
        }
    }).addTo(mymap);

    L.geoJSON(lineJson).addTo(mymap);

    L.geoJSON(lineJson, {
        style: function (feature) {
            return { color: '#597E52' };
        }
    }).addTo(mymap);

    L.geoJSON(lineJson, {
        filter: function (feature) {
            return feature.geometry.type === 'Polygon';
        },
        style: function (feature) {
            if (feature.geometry.coordinates[0][0][1] === 50.482001410025475) {
                return { fillColor: '#F8E559', fillOpacity: 0.7 };
            } else {
                return { fillColor: '#964B00', fillOpacity: 0.7 };
            }
        }
    }).addTo(mymap);
</script>
</body>
</html>
